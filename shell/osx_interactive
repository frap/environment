# -*- mode: sh; -*-

# If Apple with M1 add below path
append_to_path "/opt/homebrew/bin"
if command_exists brew
then
    eval $(brew shellenv)

    export HOMEBREW_AUTO_UPDATE_SECS=3600
    export HOMEBREW_DEVELOPER=1
    export HOMEBREW_UPDATE_REPORT_ONLY_INSTALLED=1
    export HOMEBREW_GIT_FILTER_TREE_ZERO=1
    #  export HOMEBREW_BOOTSNAP=1
fi

# Enable Terminal.app folder icons
[ "$TERM_PROGRAM" = "Apple_Terminal" ] && export TERMINALAPP=1
if [ $TERMINALAPP ]
then
  set_terminal_app_pwd() {
    # Tell Terminal.app about each directory change.
    printf '\e]7;%s\a' "$(echo "file://$HOST$PWD" | sed -e 's/ /%20/g')"
  }
fi


# complete fails on zsh
if command_exists kitty; then
    source <(kitty + complete setup zsh)
fi

# OSX specific script (uses AppleScripts) to ask me to take a break every hour
# Run this function as a background process using &
# alert &
alert () {
        while true ; do
                        # 3600 seconds is 1 hour
            sleep 3600
            osascript -e 'tell app "System Events" to display dialog "Take a break! You have been staring at the screen for far too long "' 1>&/dev/null
        done
        exit 0
}
